const planPathes=document.querySelectorAll(".facade-plan__path");Fancybox.defaults.closeButton=!1,planPathes.forEach(a=>{a.addEventListener("click",()=>{Fancybox.show([{src:"#flatModal",type:"inline"}],{dragToClose:!1,mainClass:"modal-flat__container"})})});
!function(){jQuery.fn.slideFadeClose=function(t,a,i){return this.animate({opacity:"hide",height:"hide"},t,a,i)},jQuery.fn.slideFadeOpen=function(t,a,i){return this.animate({opacity:"show",height:"show"},t,a,i)},$((function(){$("#flat-block-info").click((function(){return $("#popup-detail").fadeIn(300,(function(){$("body").addClass("locked")})),!1}))}));var t={};$((function(){var a=0;$(".genplan-wrap .slide").each((function(){var i,e,s,o=$("#slides").height(),n=$("#slides").width(),r=n/o,d=0,l=0,h=$(this),p=$(this).data("svgblock"),c=$(this).data("image"),f=$(this),g=t[p]=SVG().addTo("#"+p);console.log(t,p),a++,void 0===$(this).attr("id")&&$(this).attr("id","slide_"+(e=0,s=1e4,Math.floor(Math.random()*(s-e+1))+e)),i=$(this).attr("id"),f.css("marginTop",0),f.css("marginLeft",0);var u=new SVG.List([]),v=new SVG.List([]),m=(g.image(c,(function(t){var a=t.target;g.prop_w=a.naturalWidth,g.prop_h=a.naturalHeight||g.prop_w,g.ratio=g.prop_w/g.prop_h,g.container=i,g.ratio>r?(d=o,l=g.ratio*d,f.css("marginLeft",-Math.abs(l-n)/2+"px")):(d=(l=n)/g.ratio,f.css("marginTop",-Math.abs(d-o)/2+"px")),g.size(l,d),g.viewbox(0,0,g.prop_w,g.prop_h),this.size(g.prop_w,g.prop_h)})),0);h.find(".area").each((function(){var t=$(this).data("coords");if(void 0!==t&&t){var i=void 0!==$(this).data("tooltip")&&1==$(this).data("tooltip"),e=$(this).data("url")||"";m++;var s=a+"_"+m,o=$(this).data("houseid")||"",n=$(this).data("ttactive")||0,r=g.path(t).attr({fill:"rgba(255,180,1,0.6)",opacity:.15,id:"area_"+s}).addClass("area_path").data("url",e);if(i&&r.data({linked_tooltip:"area_tooltip_"+s,houseid:o,ttactive:n}),u.push(r),i){var d,l=$(this).data("ttdir")||"top",h=$(this).data("ttposx")||0,p=$(this).data("ttposy")||0,c=$(this).data("tttext")||"",f=$(this).data("ttscale")||1,_=$(this).data("ttbgcolor")||"#0C52C2",w=$(this).data("ttbghover")||"#FFB401",b=$(this).data("tttextcolor")||"#ffffff",x=$(this).data("tttexthover")||"#2F3130",k=$(this).data("ttfontsize")||18,y=$(this).data("ttsubt")||"",C=g.group().attr({id:"area_tooltip_"+s}).addClass("pl_group").data({linked_area:"area_"+s});switch(C.data({ttbgcolor:_,ttbghover:w}),C.data({tttextcolor:b,tttexthover:x}),l){case"left":d=C.path("M-15,-19 H-106 Q-110,-19 -110,-16 V16 Q-110,19 -106,19 H-15 L-1,2 Q1,0 -1,-2 Z");break;case"right":d=C.path("M15,-19 H106 Q110,-19 110,-16 V16 Q110,19 106,19 H15 L1,2 Q-1,0 1,-2 Z");break;default:d=C.path("M0,0 l-8,-12 h-43 v-40 h101 v40 h-43 Z")}d.attr({fill:_}).addClass("pl_bg"),C.text((function(t){t.tspan(c),y.length&&t.tspan(y).newLine().font({size:k-5})})).font({family:"PT Sans Narrow",size:k,anchor:"middle",leading:"1em"}).center(0,-.6*d.height()).attr({"text-anchor":"middle","font-weight":"bold",fill:b}).addClass("pl_text"),C.center(h,p-.5*d.height()).scale(f),v.push(C)}}})),u.mouseover((function(){if(this.timeline().stop(),this.animate(200,0,"now").ease("<>").attr({opacity:1}),void 0!==this.data("linked_tooltip")){var t=SVG("#"+this.data("linked_tooltip")),a=t.find("path.pl_bg"),i=t.find(".pl_text");a.timeline().stop(),a.animate(200,0,"now").ease("<>").attr({fill:t.data("ttbghover")}),i.timeline().stop(),i.animate(200,0,"now").ease("<>").attr({fill:t.data("tttexthover")})}})).mouseout((function(){if(this.timeline().stop(),this.animate(200,0,"now").ease("<>").attr({opacity:.15}),void 0!==this.data("linked_tooltip")){var t=SVG("#"+this.data("linked_tooltip")),a=t.find("path.pl_bg"),i=t.find(".pl_text");a.timeline().stop(),a.animate(200,0,"now").ease("<>").attr({fill:t.data("ttbgcolor")}),i.timeline().stop(),i.animate(200,0,"now").ease("<>").attr({fill:t.data("tttextcolor")})}})).click((function(){this.data("ttactive")&&openHouse(this.data("houseid"))}))})),$(".genplan-wrap a.arrow").click((function(){var t,a=$(".genplan-wrap .slide"),i=$(".genplan-wrap .slide.active");return $(this).hasClass("left")&&(0==(t=i.prev(".slide")).length&&(t=a.last()),t),$(this).hasClass("right")&&(0==(t=i.next(".slide")).length&&(t=a.first()),t),i.fadeTo(300,0,(function(){$(this).removeClass("active"),$(this).css("display","none")})),t.fadeTo(300,1,(function(){$(this).addClass("active")})),!1})),jQuery(window).resize((function(){var a=$("#slides").height(),i=$("#slides").width(),e=i/a;for(var s in console.log(t),t){var o=t[s],n=0,r=0,d=$("#"+o.container);d.css("marginTop",0),d.css("marginLeft",0),o.ratio>e?(r=a,n=o.ratio*r,d.css("marginLeft",-Math.abs(n-i)/2+"px")):(r=(n=i)/o.ratio,d.css("marginTop",-Math.abs(r-a)/2+"px")),o.size(n,r)}}))}))}();
const menuBtn=document.querySelector(".menu-btn"),sideMenu=document.querySelector(".side-menu");function toggleClass(e,s){e.classList.contains(s)?e.classList.remove(s):e.classList.add(s)}function toggleTabs(e,s){const t=s.querySelectorAll(".tab");t&&t.length>0&&t.forEach(s=>{s===e&&s.classList.contains("active")||(s!==e&&s.classList.contains("active")?s.classList.remove("active"):s.classList.add("active"))})}menuBtn&&menuBtn.addEventListener("click",()=>{toggleClass(menuBtn,"active"),toggleClass(sideMenu,"active")}),$(".js-range-slider").ionRangeSlider({});
const maps=document.querySelectorAll(".map");console.log(maps),maps.length>0&&maps.forEach(e=>{const o=e.dataset;e.innerHTML='<div id="ymap_ctrl_display" style="display: none; width: 100%; height: 100%; position: absolute; background-color: rgba(0, 0, 0, 0.5); z-index: 100; pointer-events: none;"><div style="position: relative; top: 50%; left: 0; right: 0; color: white; text-align: center; font-size: 1.8em; pointer-events: none;">Чтобы изменить масштаб, прокручивайте карту, удерживая клавишу Ctrl.</div></div>',ymaps.ready(()=>{let t=new ymaps.Map(e,{center:[o.lat,o.lng],zoom:o.zoom,controls:[]});if(o.dots){JSON.parse(o.dots).forEach(e=>{dotPlacemark=new ymaps.Placemark([e.lat,e.lng],{},{iconLayout:"default#image",iconImageHref:"img/mark.svg",iconImageSize:[30,42],iconImageOffset:[-5,-38]}),t.geoObjects.add(dotPlacemark)})}if(t.behaviors.disable("scrollZoom"),window.innerWidth>768){var a,n=!1,i=!1;t.events.add(["wheel","mousedown"],(function(e){"wheel"==e.get("type")&&(n?$("#ymap_ctrl_display").fadeOut(100):($("#ymap_ctrl_display").fadeIn(300),i=!0,clearTimeout(a),a=setTimeout((function(){$("#ymap_ctrl_display").fadeOut(300),i=!1}),1500))),"mousedown"==e.get("type")&&i&&$("#ymap_ctrl_display").fadeOut(100)})),$(document).keydown((function(e){17!==e.which||n||(n=!0,t.behaviors.enable("scrollZoom"))})),$(document).keyup((function(e){17===e.which&&(n=!1,t.behaviors.disable("scrollZoom"))}))}})});
$(".select").each((function(){const e=$(this),t=e.find("option"),s=t.length;t.filter(":selected");e.hide(),e.wrap('<div class="select"></div>');const l=$("<div>",{class:"new-select",text:e.children("option:selected").text()});l.append('<svg width="10" height="8" viewBox="0 0 10 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 8.00012L0.669873 0.500122L9.33013 0.500123L5 8.00012Z" fill="#492E16"/></svg>'),l.insertAfter(e);const i=e.next(".new-select");$("<div>",{class:"new-select__list"}).insertAfter(i);const n=i.next(".new-select__list");for(let e=0;e<s;e++)$("<div>",{class:"new-select__item",html:$("<span>",{text:t.eq(e).text()})}).attr("data-value",t.eq(e).val()).appendTo(n);const a=n.find(".new-select__item");n.removeClass("active"),i.on("click",(function(){$(this).hasClass("on")?($(this).removeClass("on"),n.removeClass("active")):($(this).addClass("on"),n.addClass("active"),a.on("click",(function(){let e=$(this).data("value");$("select").val(e).attr("selected","selected"),i.text($(this).find("span").text()),n.removeClass("active"),i.removeClass("on")})))}))})),$(".typeSelect").each((function(){const e=$(this),t=e.find("option"),s=t.length;t.filter(":selected");e.hide(),e.wrap('<div class="type-select__wrap"></div>');const l=$("<div>",{class:"type-select",text:e.children("option:selected").text()});l.append('<svg width="10" height="8" viewBox="0 0 10 8" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 8.00012L0.669873 0.500122L9.33013 0.500123L5 8.00012Z" fill="#492E16"/></svg>'),l.insertAfter(e);const i=e.next(".type-select");$("<div>",{class:"type-select__list"}).insertAfter(i);const n=i.next(".type-select__list");for(let e=0;e<s;e++)$("<div>",{class:"type-select__item",html:$("<span>",{text:t.eq(e).text()})}).attr("data-value",t.eq(e).val()).appendTo(n);const a=n.find(".type-select__item");n.removeClass("active"),i.on("click",(function(){$(this).hasClass("on")?($(this).removeClass("on"),n.removeClass("active")):($(this).addClass("on"),n.addClass("active"),a.on("click",(function(){let e=$(this).data("value");$("select").val(e).attr("selected","selected"),i.text($(this).find("span").text()),n.removeClass("active"),i.removeClass("on")})))}))}));
document.addEventListener("DOMContentLoaded",()=>{new Swiper(".main-slider",{speed:500,slidesPerView:1,loop:!0,pagination:{el:".main-slider__pagination"},navigation:{nextEl:".main-slider__nav-next",prevEl:".main-slider__nav-prev"}}),new Swiper(".about-gallery__slider",{speed:500,slidesPerView:1,loop:!0,pagination:{el:".about-gallery__pagination"},navigation:{nextEl:".about-gallery__nav-next",prevEl:".about-gallery__nav-prev"}})});
//# sourceMappingURL=../sourcemaps/main.min.js.map
